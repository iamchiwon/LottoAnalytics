

```python
from rx import *
import requests
from bs4 import BeautifulSoup
import pandas as pd
```

### 최근 회차 정보 가져오기


```python
def getLatest():
    url = "http://m.nlotto.co.kr/gameResult.do?method=byWin"
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    latest = soup.select('h3.result_title strong')[0].text
    return latest
```


```python
print( getLatest() )
```

    772
    

### 특정 회차(범위)의 당첨번호 정보 가져오기ㅡ


```python
def getNumbers(start, end):
    allNumbers = []
    
    url = "http://nlotto.co.kr/gameResult.do?method=allWinExel&gubun=byWin&nowPage=&drwNoStart={}&drwNoEnd={}".format(start, end)
    response = requests.get(url)
    soup = BeautifulSoup(response.text, 'html.parser')
    trs = soup.select('tr')
    for tr in trs[3:]:
        tds = tr.select('td')
        nth = tds[1].text
        dateIndex = 2
        if '.' in nth:
            nth = tds[0].text
            dateIndex = 1
        date = tds[dateIndex].text
        numbers = list(map(lambda td: td.text, tds[-7:]))
        
        info = {}
        info['date'] = date
        info['nth'] = nth
        info['1'] = numbers[0]
        info['2'] = numbers[1]
        info['3'] = numbers[2]
        info['4'] = numbers[3]
        info['5'] = numbers[4]
        info['6'] = numbers[5]
        info['B'] = numbers[6]
        allNumbers.append(info)
        
    return allNumbers
```

### 전체회차 데이터 가져와서 dataframe 으로 만들기


```python
data = getNumbers(1, getLatest())
```


```python
df = pd.DataFrame(data)
df['date'] = pd.to_datetime(df['date'])
df = df.set_index('nth')
df
```




<div>
<style>
    .dataframe thead tr:only-child th {
        text-align: right;
    }

    .dataframe thead th {
        text-align: left;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
      <th>5</th>
      <th>6</th>
      <th>B</th>
      <th>date</th>
    </tr>
    <tr>
      <th>nth</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>772</th>
      <td>5</td>
      <td>6</td>
      <td>11</td>
      <td>14</td>
      <td>21</td>
      <td>41</td>
      <td>32</td>
      <td>2017-09-16</td>
    </tr>
    <tr>
      <th>771</th>
      <td>6</td>
      <td>10</td>
      <td>17</td>
      <td>18</td>
      <td>21</td>
      <td>29</td>
      <td>30</td>
      <td>2017-09-09</td>
    </tr>
    <tr>
      <th>770</th>
      <td>1</td>
      <td>9</td>
      <td>12</td>
      <td>23</td>
      <td>39</td>
      <td>43</td>
      <td>34</td>
      <td>2017-09-02</td>
    </tr>
    <tr>
      <th>769</th>
      <td>5</td>
      <td>7</td>
      <td>11</td>
      <td>16</td>
      <td>41</td>
      <td>45</td>
      <td>4</td>
      <td>2017-08-26</td>
    </tr>
    <tr>
      <th>768</th>
      <td>7</td>
      <td>27</td>
      <td>29</td>
      <td>30</td>
      <td>38</td>
      <td>44</td>
      <td>4</td>
      <td>2017-08-19</td>
    </tr>
    <tr>
      <th>767</th>
      <td>5</td>
      <td>15</td>
      <td>20</td>
      <td>31</td>
      <td>34</td>
      <td>42</td>
      <td>22</td>
      <td>2017-08-12</td>
    </tr>
    <tr>
      <th>766</th>
      <td>9</td>
      <td>30</td>
      <td>34</td>
      <td>35</td>
      <td>39</td>
      <td>41</td>
      <td>21</td>
      <td>2017-08-05</td>
    </tr>
    <tr>
      <th>765</th>
      <td>1</td>
      <td>3</td>
      <td>8</td>
      <td>12</td>
      <td>42</td>
      <td>43</td>
      <td>33</td>
      <td>2017-07-29</td>
    </tr>
    <tr>
      <th>764</th>
      <td>7</td>
      <td>22</td>
      <td>24</td>
      <td>31</td>
      <td>34</td>
      <td>36</td>
      <td>15</td>
      <td>2017-07-22</td>
    </tr>
    <tr>
      <th>763</th>
      <td>3</td>
      <td>8</td>
      <td>16</td>
      <td>32</td>
      <td>34</td>
      <td>43</td>
      <td>10</td>
      <td>2017-07-15</td>
    </tr>
    <tr>
      <th>762</th>
      <td>1</td>
      <td>3</td>
      <td>12</td>
      <td>21</td>
      <td>26</td>
      <td>41</td>
      <td>16</td>
      <td>2017-07-08</td>
    </tr>
    <tr>
      <th>761</th>
      <td>4</td>
      <td>7</td>
      <td>11</td>
      <td>24</td>
      <td>42</td>
      <td>45</td>
      <td>30</td>
      <td>2017-07-01</td>
    </tr>
    <tr>
      <th>760</th>
      <td>10</td>
      <td>22</td>
      <td>27</td>
      <td>31</td>
      <td>42</td>
      <td>43</td>
      <td>12</td>
      <td>2017-06-24</td>
    </tr>
    <tr>
      <th>759</th>
      <td>9</td>
      <td>33</td>
      <td>36</td>
      <td>40</td>
      <td>42</td>
      <td>43</td>
      <td>32</td>
      <td>2017-06-17</td>
    </tr>
    <tr>
      <th>758</th>
      <td>5</td>
      <td>9</td>
      <td>12</td>
      <td>30</td>
      <td>39</td>
      <td>43</td>
      <td>24</td>
      <td>2017-06-10</td>
    </tr>
    <tr>
      <th>757</th>
      <td>6</td>
      <td>7</td>
      <td>11</td>
      <td>17</td>
      <td>33</td>
      <td>44</td>
      <td>1</td>
      <td>2017-06-03</td>
    </tr>
    <tr>
      <th>756</th>
      <td>10</td>
      <td>14</td>
      <td>16</td>
      <td>18</td>
      <td>27</td>
      <td>28</td>
      <td>4</td>
      <td>2017-05-27</td>
    </tr>
    <tr>
      <th>755</th>
      <td>13</td>
      <td>14</td>
      <td>26</td>
      <td>28</td>
      <td>30</td>
      <td>36</td>
      <td>37</td>
      <td>2017-05-20</td>
    </tr>
    <tr>
      <th>754</th>
      <td>2</td>
      <td>8</td>
      <td>17</td>
      <td>24</td>
      <td>29</td>
      <td>31</td>
      <td>32</td>
      <td>2017-05-13</td>
    </tr>
    <tr>
      <th>753</th>
      <td>2</td>
      <td>17</td>
      <td>19</td>
      <td>24</td>
      <td>37</td>
      <td>41</td>
      <td>3</td>
      <td>2017-05-06</td>
    </tr>
    <tr>
      <th>752</th>
      <td>4</td>
      <td>16</td>
      <td>20</td>
      <td>33</td>
      <td>40</td>
      <td>43</td>
      <td>7</td>
      <td>2017-04-29</td>
    </tr>
    <tr>
      <th>751</th>
      <td>3</td>
      <td>4</td>
      <td>16</td>
      <td>20</td>
      <td>28</td>
      <td>44</td>
      <td>17</td>
      <td>2017-04-22</td>
    </tr>
    <tr>
      <th>750</th>
      <td>1</td>
      <td>2</td>
      <td>15</td>
      <td>19</td>
      <td>24</td>
      <td>36</td>
      <td>12</td>
      <td>2017-04-15</td>
    </tr>
    <tr>
      <th>749</th>
      <td>12</td>
      <td>14</td>
      <td>24</td>
      <td>26</td>
      <td>34</td>
      <td>45</td>
      <td>41</td>
      <td>2017-04-08</td>
    </tr>
    <tr>
      <th>748</th>
      <td>3</td>
      <td>10</td>
      <td>13</td>
      <td>22</td>
      <td>31</td>
      <td>32</td>
      <td>29</td>
      <td>2017-04-01</td>
    </tr>
    <tr>
      <th>747</th>
      <td>7</td>
      <td>9</td>
      <td>12</td>
      <td>14</td>
      <td>23</td>
      <td>28</td>
      <td>17</td>
      <td>2017-03-25</td>
    </tr>
    <tr>
      <th>746</th>
      <td>3</td>
      <td>12</td>
      <td>33</td>
      <td>36</td>
      <td>42</td>
      <td>45</td>
      <td>25</td>
      <td>2017-03-18</td>
    </tr>
    <tr>
      <th>745</th>
      <td>1</td>
      <td>2</td>
      <td>3</td>
      <td>9</td>
      <td>12</td>
      <td>23</td>
      <td>10</td>
      <td>2017-03-11</td>
    </tr>
    <tr>
      <th>744</th>
      <td>10</td>
      <td>15</td>
      <td>18</td>
      <td>21</td>
      <td>34</td>
      <td>41</td>
      <td>43</td>
      <td>2017-03-04</td>
    </tr>
    <tr>
      <th>743</th>
      <td>15</td>
      <td>19</td>
      <td>21</td>
      <td>34</td>
      <td>41</td>
      <td>44</td>
      <td>10</td>
      <td>2017-02-25</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>30</th>
      <td>8</td>
      <td>17</td>
      <td>20</td>
      <td>35</td>
      <td>36</td>
      <td>44</td>
      <td>4</td>
      <td>2003-06-28</td>
    </tr>
    <tr>
      <th>29</th>
      <td>1</td>
      <td>5</td>
      <td>13</td>
      <td>34</td>
      <td>39</td>
      <td>40</td>
      <td>11</td>
      <td>2003-06-21</td>
    </tr>
    <tr>
      <th>28</th>
      <td>9</td>
      <td>18</td>
      <td>23</td>
      <td>25</td>
      <td>35</td>
      <td>37</td>
      <td>1</td>
      <td>2003-06-14</td>
    </tr>
    <tr>
      <th>27</th>
      <td>1</td>
      <td>20</td>
      <td>26</td>
      <td>28</td>
      <td>37</td>
      <td>43</td>
      <td>27</td>
      <td>2003-06-07</td>
    </tr>
    <tr>
      <th>26</th>
      <td>4</td>
      <td>5</td>
      <td>7</td>
      <td>18</td>
      <td>20</td>
      <td>25</td>
      <td>31</td>
      <td>2003-05-31</td>
    </tr>
    <tr>
      <th>25</th>
      <td>2</td>
      <td>4</td>
      <td>21</td>
      <td>26</td>
      <td>43</td>
      <td>44</td>
      <td>16</td>
      <td>2003-05-24</td>
    </tr>
    <tr>
      <th>24</th>
      <td>7</td>
      <td>8</td>
      <td>27</td>
      <td>29</td>
      <td>36</td>
      <td>43</td>
      <td>6</td>
      <td>2003-05-17</td>
    </tr>
    <tr>
      <th>23</th>
      <td>5</td>
      <td>13</td>
      <td>17</td>
      <td>18</td>
      <td>33</td>
      <td>42</td>
      <td>44</td>
      <td>2003-05-10</td>
    </tr>
    <tr>
      <th>22</th>
      <td>4</td>
      <td>5</td>
      <td>6</td>
      <td>8</td>
      <td>17</td>
      <td>39</td>
      <td>25</td>
      <td>2003-05-03</td>
    </tr>
    <tr>
      <th>21</th>
      <td>6</td>
      <td>12</td>
      <td>17</td>
      <td>18</td>
      <td>31</td>
      <td>32</td>
      <td>21</td>
      <td>2003-04-26</td>
    </tr>
    <tr>
      <th>20</th>
      <td>10</td>
      <td>14</td>
      <td>18</td>
      <td>20</td>
      <td>23</td>
      <td>30</td>
      <td>41</td>
      <td>2003-04-19</td>
    </tr>
    <tr>
      <th>19</th>
      <td>6</td>
      <td>30</td>
      <td>38</td>
      <td>39</td>
      <td>40</td>
      <td>43</td>
      <td>26</td>
      <td>2003-04-12</td>
    </tr>
    <tr>
      <th>18</th>
      <td>3</td>
      <td>12</td>
      <td>13</td>
      <td>19</td>
      <td>32</td>
      <td>35</td>
      <td>29</td>
      <td>2003-04-05</td>
    </tr>
    <tr>
      <th>17</th>
      <td>3</td>
      <td>4</td>
      <td>9</td>
      <td>17</td>
      <td>32</td>
      <td>37</td>
      <td>1</td>
      <td>2003-03-29</td>
    </tr>
    <tr>
      <th>16</th>
      <td>6</td>
      <td>7</td>
      <td>24</td>
      <td>37</td>
      <td>38</td>
      <td>40</td>
      <td>33</td>
      <td>2003-03-22</td>
    </tr>
    <tr>
      <th>15</th>
      <td>3</td>
      <td>4</td>
      <td>16</td>
      <td>30</td>
      <td>31</td>
      <td>37</td>
      <td>13</td>
      <td>2003-03-15</td>
    </tr>
    <tr>
      <th>14</th>
      <td>2</td>
      <td>6</td>
      <td>12</td>
      <td>31</td>
      <td>33</td>
      <td>40</td>
      <td>15</td>
      <td>2003-03-08</td>
    </tr>
    <tr>
      <th>13</th>
      <td>22</td>
      <td>23</td>
      <td>25</td>
      <td>37</td>
      <td>38</td>
      <td>42</td>
      <td>26</td>
      <td>2003-03-01</td>
    </tr>
    <tr>
      <th>12</th>
      <td>2</td>
      <td>11</td>
      <td>21</td>
      <td>25</td>
      <td>39</td>
      <td>45</td>
      <td>44</td>
      <td>2003-02-22</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1</td>
      <td>7</td>
      <td>36</td>
      <td>37</td>
      <td>41</td>
      <td>42</td>
      <td>14</td>
      <td>2003-02-15</td>
    </tr>
    <tr>
      <th>10</th>
      <td>9</td>
      <td>25</td>
      <td>30</td>
      <td>33</td>
      <td>41</td>
      <td>44</td>
      <td>6</td>
      <td>2003-02-08</td>
    </tr>
    <tr>
      <th>9</th>
      <td>2</td>
      <td>4</td>
      <td>16</td>
      <td>17</td>
      <td>36</td>
      <td>39</td>
      <td>14</td>
      <td>2003-02-01</td>
    </tr>
    <tr>
      <th>8</th>
      <td>8</td>
      <td>19</td>
      <td>25</td>
      <td>34</td>
      <td>37</td>
      <td>39</td>
      <td>9</td>
      <td>2003-01-25</td>
    </tr>
    <tr>
      <th>7</th>
      <td>2</td>
      <td>9</td>
      <td>16</td>
      <td>25</td>
      <td>26</td>
      <td>40</td>
      <td>42</td>
      <td>2003-01-18</td>
    </tr>
    <tr>
      <th>6</th>
      <td>14</td>
      <td>15</td>
      <td>26</td>
      <td>27</td>
      <td>40</td>
      <td>42</td>
      <td>34</td>
      <td>2003-01-11</td>
    </tr>
    <tr>
      <th>5</th>
      <td>16</td>
      <td>24</td>
      <td>29</td>
      <td>40</td>
      <td>41</td>
      <td>42</td>
      <td>3</td>
      <td>2003-01-04</td>
    </tr>
    <tr>
      <th>4</th>
      <td>14</td>
      <td>27</td>
      <td>30</td>
      <td>31</td>
      <td>40</td>
      <td>42</td>
      <td>2</td>
      <td>2002-12-28</td>
    </tr>
    <tr>
      <th>3</th>
      <td>11</td>
      <td>16</td>
      <td>19</td>
      <td>21</td>
      <td>27</td>
      <td>31</td>
      <td>30</td>
      <td>2002-12-21</td>
    </tr>
    <tr>
      <th>2</th>
      <td>9</td>
      <td>13</td>
      <td>21</td>
      <td>25</td>
      <td>32</td>
      <td>42</td>
      <td>2</td>
      <td>2002-12-14</td>
    </tr>
    <tr>
      <th>1</th>
      <td>10</td>
      <td>23</td>
      <td>29</td>
      <td>33</td>
      <td>37</td>
      <td>40</td>
      <td>16</td>
      <td>2002-12-07</td>
    </tr>
  </tbody>
</table>
<p>772 rows × 8 columns</p>
</div>




```python

```
